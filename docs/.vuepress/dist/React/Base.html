<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>React16新特性 | 前端打杂师 - Zhu</title>
    <meta name="description" content="All is well">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" href="/vue-press/image/favicon.ico">
    
    <link rel="preload" href="/vue-press/assets/css/0.styles.309fb19c.css" as="style"><link rel="preload" href="/vue-press/assets/js/app.da7e946b.js" as="script"><link rel="preload" href="/vue-press/assets/js/2.0f3728a8.js" as="script"><link rel="preload" href="/vue-press/assets/js/10.7d8caf48.js" as="script"><link rel="prefetch" href="/vue-press/assets/js/11.6067b55f.js"><link rel="prefetch" href="/vue-press/assets/js/12.fdebb669.js"><link rel="prefetch" href="/vue-press/assets/js/13.773aacde.js"><link rel="prefetch" href="/vue-press/assets/js/14.e95879dd.js"><link rel="prefetch" href="/vue-press/assets/js/15.5d6134b0.js"><link rel="prefetch" href="/vue-press/assets/js/16.d3b871a5.js"><link rel="prefetch" href="/vue-press/assets/js/17.8f51b858.js"><link rel="prefetch" href="/vue-press/assets/js/18.f1e79026.js"><link rel="prefetch" href="/vue-press/assets/js/19.3468003f.js"><link rel="prefetch" href="/vue-press/assets/js/20.a60496f0.js"><link rel="prefetch" href="/vue-press/assets/js/21.1cc1b4af.js"><link rel="prefetch" href="/vue-press/assets/js/3.429d08a1.js"><link rel="prefetch" href="/vue-press/assets/js/4.ad33241c.js"><link rel="prefetch" href="/vue-press/assets/js/5.8803b9cf.js"><link rel="prefetch" href="/vue-press/assets/js/6.985bcf73.js"><link rel="prefetch" href="/vue-press/assets/js/7.0b1339da.js"><link rel="prefetch" href="/vue-press/assets/js/8.d493bee3.js"><link rel="prefetch" href="/vue-press/assets/js/9.0b2732c6.js">
    <link rel="stylesheet" href="/vue-press/assets/css/0.styles.309fb19c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vue-press/" class="home-link router-link-active"><!----> <span class="site-name">前端打杂师 - Zhu</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/vue-press/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vue-press/JS/Base.html" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="https://github.com/ThecoadeR/vue-press/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/vue-press/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/vue-press/JS/Base.html" class="nav-link">
  博客
</a></div><div class="nav-item"><a href="https://github.com/ThecoadeR/vue-press/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>VuePress</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>React</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vue-press/React/" class="sidebar-link">Redux工作流解析</a></li><li><a href="/vue-press/React/Base.html" class="active sidebar-link">React16新特性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vue-press/React/Base.html#生命周期" class="sidebar-link">生命周期</a></li><li class="sidebar-sub-header"><a href="/vue-press/React/Base.html#virtual-dom以及key" class="sidebar-link">Virtual Dom以及key</a></li><li class="sidebar-sub-header"><a href="/vue-press/React/Base.html#context-api-切勿滥用" class="sidebar-link">Context Api</a></li><li class="sidebar-sub-header"><a href="/vue-press/React/Base.html#purecomponent和memo" class="sidebar-link">PureComponent和memo</a></li><li class="sidebar-sub-header"><a href="/vue-press/React/Base.html#hooks" class="sidebar-link">Hooks</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Webpack</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Electron</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端代码规范</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端面试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>随手记</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="react16新特性"><a href="#react16新特性" class="header-anchor">#</a> React16新特性</h1> <h2 id="生命周期"><a href="#生命周期" class="header-anchor">#</a> 生命周期</h2> <h3 id="组件初始化"><a href="#组件初始化" class="header-anchor">#</a> 组件初始化</h3> <ul><li><h3 id="constructor"><a href="#constructor" class="header-anchor">#</a> Constructor</h3></li></ul> <ol><li>用于初始化组建内部状态</li> <li>唯一可以直接修改State的地方 (由于是在constructor中 所以可以直接通过 <code>this.state = xxx</code> 直接修改 而不需要通过<code>setState</code>)</li></ol> <ul><li><h3 id="getderivedstatefromprops"><a href="#getderivedstatefromprops" class="header-anchor">#</a> getDerivedStateFromProps</h3></li></ul> <ol><li>当state需要从props初始化时使用</li> <li>尽量不要使用 =&gt; <span style="color:red;">维护两者状态一致性会增加复杂度</span></li> <li>每次render都会调用</li> <li>典型场景: 获取表单控件默认值</li></ol> <ul><li><h3 id="componentdidmount"><a href="#componentdidmount" class="header-anchor">#</a> componentDidMount</h3></li></ul> <ol><li>UI渲染完以后调用</li> <li>只执行一次</li> <li>场景: 获取外部资源 =&gt; 发起ajax请求</li></ol> <h3 id="组件卸载"><a href="#组件卸载" class="header-anchor">#</a> 组件卸载</h3> <ul><li><h3 id="componentwillunmount"><a href="#componentwillunmount" class="header-anchor">#</a> componentWillUnMount</h3></li></ul> <ol><li>组件移除时被调用</li> <li>场景: 资源释放 =&gt; 清空定时器</li></ol> <h3 id="组件更新"><a href="#组件更新" class="header-anchor">#</a> 组件更新</h3> <ul><li><h3 id="getsnapshotbeforeupdate"><a href="#getsnapshotbeforeupdate" class="header-anchor">#</a> getSnapshotBeforeUpdate</h3></li></ul> <ol><li>在render之前被调用 此时state已被更新</li> <li>场景: 获取render之前的Dom状态</li></ol> <ul><li><h3 id="componentdidupdate"><a href="#componentdidupdate" class="header-anchor">#</a> componentDidUpdate</h3></li></ul> <ol><li>每次UI更新时被调用</li> <li>场景: 页面根据props变化重新获取数据</li></ol> <ul><li><h3 id="shouldcomponentupdate"><a href="#shouldcomponentupdate" class="header-anchor">#</a> shouldComponentUpdate</h3></li></ul> <ol><li>决定虚拟dom是否要重绘</li> <li>一般可以由<code>PureComponent</code>自动实现</li> <li>场景: 性能优化</li></ol> <h2 id="virtual-dom以及key"><a href="#virtual-dom以及key" class="header-anchor">#</a> Virtual Dom以及key</h2> <ul><li><h3 id="广度优先分层比较"><a href="#广度优先分层比较" class="header-anchor">#</a> 广度优先分层比较</h3> <ol><li>从根结点开始比较</li> <li>如果是属性变化或者是顺序变化 =&gt; 通过组件标识 然后交换节点位置</li> <li>如果组件类型发生变化 =&gt; 直接删除的原有节点并替换</li> <li>节点跨层移动 =&gt; 删除原有的节点 在新层级下append节点 (性能比较低)</li></ol></li></ul> <h2 id="context-api-切勿滥用"><a href="#context-api-切勿滥用" class="header-anchor">#</a> Context Api <span style="color:red;font-size:16px;">切勿滥用</span></h2> <ul><li>定义
<ul><li>提供了一种方式 能够让数据在组件树中传递 而不需要一层一层的向下props</li> <li>类似<code>vue</code>中的<code>provide/inject</code></li></ul></li> <li>创建
<ul><li><code>React.createContent(val)</code></li> <li><code>val</code> 如果<code>Consumer</code>找不到对应的<code>Provider</code> 那么就会使用传入的val</li> <li>需要创建一个<code>Provider</code>和一个<code>Consumer</code></li> <li>示例代码
<img src="/vue-press/assets/img/context.6e76ad7e.jpg" alt=""></li></ul></li></ul> <h2 id="purecomponent和memo"><a href="#purecomponent和memo" class="header-anchor">#</a> PureComponent和memo</h2> <ul><li>两者都可以避免组件的重复渲染 减少性能开销</li> <li>前者为类组件使用 后者为函数式组件使用</li></ul> <h2 id="hooks"><a href="#hooks" class="header-anchor">#</a> Hooks</h2> <ul><li>定义
<ul><li>在函数组件中使用特定的预定义函数来标记状态和组件生命周期 使得所有组件都可以使用函数来编写</li></ul></li> <li>优化了类组件的三大问题
<ol><li>函数组件无<code>this</code>指向问题</li> <li>自定义hook方便复用逻辑</li> <li>副作用的关注点分离 =&gt; 副作用指视图修改以外的所有事件 例如: ajax请求 本地持久化缓存 绑定事件等</li></ol></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/vue-press/React/" class="prev router-link-active">
        Redux工作流解析
      </a></span> <span class="next"><a href="/vue-press/Webpack/">
        webpack是什么?
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/vue-press/assets/js/app.da7e946b.js" defer></script><script src="/vue-press/assets/js/2.0f3728a8.js" defer></script><script src="/vue-press/assets/js/10.7d8caf48.js" defer></script>
  </body>
</html>
